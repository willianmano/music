<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Teste VexFlow</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Le styles -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet">
  <link href="assets/css/application.css" rel="stylesheet">
</head>
<body>

  <div class="container">
    <h1>Vex Flow Tests</h1>
      <div id="dvCanvas" class="span12">
        <canvas id="cvPartiture" id="canvas" width="700" height="200" style="position: absolute; z-index: 0"></canvas>
        <canvas id="cvPlaceholder" width="700" height="200" style="position: absolute; z-index: 1"></canvas>
      </div>
      <div class="span12">
        <!-- <button class="btn btn-info" id="addNotes">Add Notes</button>
        <button class="btn btn-danger" id="delNotes">Delete Notes</button> -->
      </div>
  </div>

  <!-- Le Scripts -->
  <script src="assets/js/jquery.min.js" type="text/javascript"></script>
  <script src="assets/js/raphael.min.js" type="text/javascript"></script>
  <script src="assets/js/vexflow.min.js" type="text/javascript"></script>
  <!-- <script src="assets/js/app_editor.js" type="text/javascript"></script> -->
  <script src="assets/js/underscore-min.js" type="text/javascript"></script>
  <!-- <script src="assets/js/application.js" type="text/javascript"></script>
  <script src="assets/js/stage/part.js" type="text/javascript"></script>
  <script src="assets/js/stage/stage.js" type="text/javascript"></script>
  <script src="assets/js/editor.js" type="text/javascript"></script> -->

  <script src="assets/js/stage/stage.js" type="text/javascript"></script>

  <script type="text/javascript">
    
    var cvPartiture = $("#cvPartiture")[0];
    var cvPlaceholder = $("#cvPlaceholder");

    $(document).ready(function(e){

      var stage = new Music.Stage().setRendererCanvas(cvPartiture);
      var context = stage.renderer.getContext();

      var stave = new Music.Stave(10, 0, 500).stave;
      stave.addClef("treble").setContext(context).draw();

      var ctx2 = cvPlaceholder[0].getContext("2d");
      ctx2.clear = function () {
          ctx2.clearRect(-5000, 0, 10000, 5000)
      };
      cvPlaceholder.mousemove(function (f) {
        ctx2.clear();
        
        var p = new Vex.Flow.Voice({
            num_beats: 4,
            beat_value: 4,
            resolution: Vex.Flow.RESOLUTION
        });

        p.setStrict(false);
        p.draw(ctx2, stave, "rgba(0, 100, 255, .4)");
      });
    });
</script>

</body>
</html>